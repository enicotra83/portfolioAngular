<section class="educacion">
  <div class="headerSeccion">
    <h3>Educación y Certificaciones</h3>
    <!-- Boton Modal Agregar -->
    <button type="button" class="btn admin btnAgregar" data-bs-toggle="modal" data-bs-target="#agregarEducacionModal">
      <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-plus sr-only"
        viewBox="0 0 16 16">
        <path
          d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
      </svg>
    </button>
  </div>

  <div *ngFor="let educacion of educaciones; let i=index" class="accordion accordion-flush" id="accordion{{i}}">
    <div class="accordion-item">
      <h2 class="accordion-header" id="flushHeading{{i}}">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
          [attr.data-bs-target]="'#flushCollapse' + i" aria-expanded="false" [attr.aria-controls]="'flushCollapse' + i">

          <!-- Boton Editar -->
          <button type="button" class="admin" [attr.data-bs-target]="'#editEducacionModal' + i" data-bs-toggle="modal"
            (click)="agregarAEdit(educacion)">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen"
              viewBox="0 0 16 16">
              <path
                d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z" />
            </svg></button>

          <!-- Boton Eliminar -->
          <button type="button" class="admin" data-bs-toggle="modal"
            [attr.data-bs-target]="'#eliminarEducacionModal' + i">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill"
              viewBox="0 0 16 16">
              <path
                d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z" />
            </svg></button>

          <p class="tituloEdu">{{educacion.tituloEdu}}</p>
        </button>
      </h2>
    </div>

    <div id="flushCollapse{{i}}" class="accordion-collapse collapse" [attr.aria-labelledby]="'flushHeading' + i"
      [attr.data-parent]="'#accordion' + i">
      <div class="accordion-body">
        {{educacion.descripcionEdu}}
        <!-- Boton Certificado -->
        <button type="button" class="btn btn-primary btnEdu" data-bs-toggle="modal"
          [attr.data-bs-target]="'#modal' + i">
          Certificado
        </button>
        <!-- Modal Certificado-->
        <div class="modal fade" id="modal{{i}}" tabindex="-1" aria-labelledby="agregarEducacionModalLabel"
          aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <img [src]="educacion.certificadoEdu" alt="Certificado de {{educacion.tituloEdu}}" width="450px">
                <img src="" alt="" srcset="">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Editar -->
    <div class="modal fade" id="editEducacionModal{{i}}" tabindex="-1"
      [attr.aria-labelledby]="'editEducacionModalLabel'+i" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title fs-5" id="editEducacionModalLabel{{i}}">Editar {{ editEducacion?.tituloEdu }}</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form #editForm="ngForm">
              <div class="mb-3">
                <label for="tituloEdu" class="col-form-label">Titulo:</label>
                <input type="text" class="form-control" id="tituloEdu1" ngModel="{{ editEducacion?.tituloEdu }}"
                  name="tituloEdu" placeholder="Agregue el Titulo del Curso" required>
              </div>
              <input type="hidden" ngModel="{{ editEducacion?.idEdu }}" name="idEdu" class="form-control" id="idEdu"
                placeholder="" />
              <div class="mb-3">
                <label for="descripcionEdu" class="col-form-label">Descripcion:</label>
                <input type="text" class="form-control" id="descripcionEdu1"
                  ngModel="{{ editEducacion?.descripcionEdu }}" name="descripcionEdu"
                  placeholder="Agregue la descripcion del Curso" required>
              </div>
              <div class="mb-3">
                <label for="certificadoEdu" class="col-form-label">Certificado:</label>
                <input type="text" class="form-control" id="certificadoEdu1"
                  ngModel="{{ editEducacion?.certificadoEdu }}" name="certificadoEdu"
                  placeholder="Agregue el Certificado del Curso" required>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary btnEduSecondary" data-bs-dismiss="modal"
              id="1">Cerrar</button>
            <button type="button" class="btn btn-primary btnEdu" id="add-educacion-form"
              (click)="onEditEducacion(editForm.value)" data-bs-dismiss="modal">Editar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Delete modal -->
    <div class="modal fade" id="eliminarEducacionModal{{i}}" tabindex="-1" aria-labelledby="eliminarEducacionModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title fs-5" id="eliminarEducacionModalLabel">Eliminar Educacion</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>
              Estás seguro que quieres borrar
              {{ educacion.tituloEdu }}?
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary btnEduSecondary" data-bs-dismiss="modal"
              id="cerrarEducacionBtn">No</button>
            <button type="submit" class="btn btn-danger btnEdu" id="add-education-form" data-bs-dismiss="modal"
              (click)="ondeleteEducacion(educacion.idEdu)">Borrar</button>
          </div>
        </div>
      </div>
    </div>

  </div>



  <!-- Modal Agregar -->
  <div class="modal fade" id="agregarEducacionModal" tabindex="-1" aria-labelledby="agregarEducacionModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title fs-5" id="agregarEducacionModalLabel">Agregar Educacion</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form #addForm="ngForm">
            <div class="mb-3">
              <label for="tituloEdu" class="col-form-label">Titulo:</label>
              <input type="text" class="form-control" id="tituloEdu" ngModel name="tituloEdu"
                placeholder="Agregue el Titulo del Curso" required>
            </div>
            <div class="mb-3">
              <label for="descripcionEdu" class="col-form-label">Descripcion:</label>
              <input type="text" class="form-control" id="descripcionEdu" ngModel name="descripcionEdu"
                placeholder="Agregue la descripcion del Curso" required>
            </div>
            <div class="mb-3">
              <label for="certificadoEdu" class="col-form-label">Certificado:</label>
              <input type="text" class="form-control" id="certificadoEdu" ngModel name="certificadoEdu"
                placeholder="Agregue el Certificado del Curso" required>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary btnEduSecondary" data-bs-dismiss="modal"
            id="cerrarEducacionBtn">Cerrar</button>
          <button type="submit" class="btn btn-primary btnEdu" id="add-education-form" [disabled]="addForm.invalid"
            data-bs-dismiss="modal" (click)="onAddEducacion(addForm.value)">Agregar</button>
        </div>
      </div>
    </div>
  </div>



  <!-- Notification for no educations -->
  <div *ngIf="educaciones?.length == 0" class="col-lg-12 col-md-12 col-xl-12">
    <div class="alert alert-info" role="alert">
      <h4 class="alert-heading">No hay educacion!</h4>
      <p>No se encontró ninguna educacion</p>
    </div>
  </div>
  <!-- Notification for no data -->
  <div *ngIf="educaciones?.length == 0" class="col-lg-12 col-md-12 col-xl-12 spinner">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</section>